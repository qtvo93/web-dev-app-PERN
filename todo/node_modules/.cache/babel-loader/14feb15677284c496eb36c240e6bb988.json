{"ast":null,"code":"let user = document.getElementById(\"user\");\nlet tobe = document.getElementById(\"tobe\");\nlet button = document.getElementById(\"createTasks\");\nlet messageBox = document.getElementById(\"message\");\nlet tablePending = document.getElementById(\"tasksPending\");\nlet tableDone = document.getElementById(\"tasksDone\");\nlet usernameInput = document.getElementById(\"username\");\nlet passwordInput = document.getElementById(\"password\");\n\nfunction removeChildren(element) {\n  while (element.hasChildNodes()) {\n    element.lastChild.remove();\n  }\n} //document.getElementById(\"login\").onclick =  \n\n\nconst clickHere = function () {\n  fetch(\"/auth\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      username: usernameInput.value,\n      plaintextPassword: passwordInput.value\n    })\n  }).then(function (response) {\n    if (response.status === 200) {\n      var input = document.createElement(\"input\");\n      input.type = \"text\";\n      button.append(input);\n      let buttonCreate = document.createElement(\"button\");\n      buttonCreate.textContent = \"Create Task\";\n\n      buttonCreate.onclick = function () {\n        //console.log(input.value);\n        fetch(\"/add\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            username: usernameInput.value,\n            task: input.value,\n            status: 0\n          })\n        });\n      };\n\n      buttonCreate.onclick = function () {\n        console.log(usernameInput.value);\n        let requestURL = `/add?username=${usernameInput.value}`;\n        fetch(requestURL).then(function (response) {\n          if (response.status === 200) {\n            return response.json();\n          } else {\n            throw Error(response.status);\n          }\n        }).then(function (response) {\n          if (!response.rows.length) {\n            messageBox.textContent = \"No users found\";\n          } else {\n            let row = response.rows[0];\n            let tasks = row[\"tasks\"];\n            let status = row[\"status\"];\n            let tableRow = document.createElement(\"tr\");\n\n            tableRow.onclick = function () {\n              fetch(\"/update\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  username: usernameInput.value,\n                  task: tasks[tasks.length - 1]\n                })\n              });\n            };\n\n            let cell = document.createElement(\"td\");\n            cell.textContent = tasks[tasks.length - 1];\n            tableRow.append(cell);\n\n            if (status[status.length - 1]) {\n              tableDone.append(tableRow);\n              cell.style.textDecoration = \"underline\";\n            } else {\n              tablePending.append(tableRow);\n              ;\n            }\n\n            messageBox.textContent = \"\";\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n\n      button.append(buttonCreate);\n      tobe.textContent = \"\";\n      return response.json();\n    } else {\n      removeChildren(tableDone);\n      removeChildren(tablePending);\n      throw Error(response.status);\n    }\n  }).then(function (response) {\n    if (!response.rows.length) {\n      messageBox.textContent = \"No users found\";\n    } else {\n      //user.textContent = usernameInput.value;\n      removeChildren(tableDone);\n      removeChildren(tablePending);\n      tobe.textContent = \"username: \" + response.rows[0][\"username\"]; //console.log(response.rows);\n\n      let row = response.rows[0];\n      let tasks = row[\"tasks\"];\n      let status = row[\"status\"];\n\n      for (let i = 0; i < tasks.length; i++) {\n        let tableRow = document.createElement(\"tr\");\n\n        tableRow.onclick = function () {\n          fetch(\"/update\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              username: usernameInput.value,\n              task: tasks[i]\n            })\n          });\n        };\n\n        let cell = document.createElement(\"td\");\n        cell.textContent = tasks[i];\n        tableRow.append(cell);\n\n        if (status[i]) {\n          tableDone.append(tableRow);\n          cell.style.textDecoration = \"underline\";\n        } else {\n          tablePending.append(tableRow);\n        }\n      }\n\n      messageBox.textContent = \"\";\n    }\n  }).catch(function (error) {\n    console.log(error);\n  });\n};","map":{"version":3,"sources":["C:/Users/karim/Desktop/KarimDISK/DREX_21_22/Winter/CS-375/Final_project/project/CS375/CS375/Final-Project/todo/src/pages/Loginscript.js"],"names":["user","document","getElementById","tobe","button","messageBox","tablePending","tableDone","usernameInput","passwordInput","removeChildren","element","hasChildNodes","lastChild","remove","clickHere","fetch","method","headers","body","JSON","stringify","username","value","plaintextPassword","then","response","status","input","createElement","type","append","buttonCreate","textContent","onclick","task","console","log","requestURL","json","Error","rows","length","row","tasks","tableRow","cell","style","textDecoration","catch","error","i"],"mappings":"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","sourcesContent":["let user = document.getElementById(\"user\");\r\nlet tobe = document.getElementById(\"tobe\");\r\nlet button = document.getElementById(\"createTasks\");\r\nlet messageBox = document.getElementById(\"message\");\r\nlet tablePending= document.getElementById(\"tasksPending\");\t\r\nlet tableDone= document.getElementById(\"tasksDone\");\t\r\nlet usernameInput = document.getElementById(\"username\");\r\nlet passwordInput = document.getElementById(\"password\");\r\n\r\nfunction removeChildren(element) {\r\n\twhile (element.hasChildNodes()) {\r\n\t\telement.lastChild.remove();\r\n\t}\r\n}\r\n\r\n//document.getElementById(\"login\").onclick =  \r\nconst clickHere = function () {\r\n\tfetch(\"/auth\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tusername: usernameInput.value,\r\n\t\t\tplaintextPassword: passwordInput.value,\r\n\t\t})\r\n\t}).then(function (response) {\r\n\t\tif (response.status === 200) {\r\n\t\t\tvar input = document.createElement(\"input\");\r\n\t\t\tinput.type = \"text\";\r\n\t\t\tbutton.append(input);\r\n\t\t\tlet buttonCreate = document.createElement(\"button\");\r\n\t\t\tbuttonCreate.textContent = \"Create Task\";\r\n\t\t\tbuttonCreate.onclick = function () {\r\n\t\t\t//console.log(input.value);\r\n\t\t\t\tfetch(\"/add\", {\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\tusername: usernameInput.value,\r\n\t\t\t\t\t\ttask: input.value,\r\n\t\t\t\t\t\tstatus: 0,\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tbuttonCreate.onclick =  function () {\r\n\t\t\t\tconsole.log(usernameInput.value);\r\n\t\t\t\tlet requestURL = `/add?username=${usernameInput.value}`;\r\n\t\t\t\tfetch(requestURL).then(function (response) {\r\n\t\t\t\t\tif (response.status === 200) {\r\n\t\t\t\t\t\treturn response.json();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow Error(response.status);\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(function (response) {\r\n\t\t\t\t\tif (!response.rows.length){\r\n\t\t\t\t\t\tmessageBox.textContent =  \"No users found\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet row = response.rows[0];\r\n\t\t\t\t\t\tlet tasks = row[\"tasks\"];\r\n\t\t\t\t\t\tlet status = row[\"status\"];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet tableRow = document.createElement(\"tr\");\r\n\t\t\t\t\t\ttableRow.onclick = function () {\r\n\t\t\t\t\t\t\tfetch(\"/update\", {\r\n\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\t\t\t\tusername: usernameInput.value,\r\n\t\t\t\t\t\t\t\t\ttask: tasks[tasks.length -1]\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlet cell = document.createElement(\"td\");\r\n\t\t\t\t\t\tcell.textContent = tasks[tasks.length -1];\r\n\t\t\t\t\t\ttableRow.append(cell);\r\n\t\t\t\t\t\tif(status[status.length - 1]) {\r\n\t\t\t\t\t\t\ttableDone.append(tableRow);\r\n\t\t\t\t\t\t\tcell.style.textDecoration = \"underline\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttablePending.append(tableRow);;\r\n\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\tmessageBox.textContent = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tbutton.append(buttonCreate);\r\n\t\t\ttobe.textContent = \"\";\r\n\t\t\treturn response.json();\r\n\t\t} else {\r\n\t\t\tremoveChildren(tableDone);\r\n\t\t\tremoveChildren(tablePending);\r\n\t\t\tthrow Error(response.status);\r\n\t\t}\r\n\t\t\r\n\t}).then(function (response) {\r\n\t\tif (!response.rows.length){\r\n\t\t\tmessageBox.textContent =  \"No users found\";\r\n\t\t} else {\r\n\t\t\t//user.textContent = usernameInput.value;\r\n\t\t\tremoveChildren(tableDone);\r\n\t\t\tremoveChildren(tablePending);\r\n\t\t\ttobe.textContent = \"username: \" + response.rows[0][\"username\"];\r\n\t\t\t//console.log(response.rows);\r\n\t\t\tlet row = response.rows[0];\r\n\t\t\tlet tasks = row[\"tasks\"];\r\n\t\t\tlet status = row[\"status\"];\r\n            \r\n\t\t\tfor (let i=0; i < tasks.length; i++) {\r\n\t\t\t\tlet tableRow = document.createElement(\"tr\");\r\n\t\t\t\ttableRow.onclick = function () {\r\n\t\t\t\t\t\t\tfetch(\"/update\", {\r\n\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\t\t\t\tusername: usernameInput.value,\r\n\t\t\t\t\t\t\t\t\ttask: tasks[i]\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t};\r\n                let cell = document.createElement(\"td\");\r\n                cell.textContent = tasks[i];\r\n\t\t\t\ttableRow.append(cell);\r\n\t\t\t\tif(status[i]) {\r\n\t\t\t\t\ttableDone.append(tableRow);\r\n\t\t\t\t\tcell.style.textDecoration = \"underline\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttablePending.append(tableRow);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmessageBox.textContent = \"\";\r\n\t\t}\r\n\t}).catch(function (error) {\r\n\t\tconsole.log(error);\r\n\t});\r\n};"]},"metadata":{},"sourceType":"module"}